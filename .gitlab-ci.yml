# Тестовый пайплайн GitLab: проверка сборки
# Переменные (секреты) задайте в Settings → CI/CD → Variables

stages:
  - build

variables:
  NODE_VERSION: "18"

# Сборка фронтенда (без деплоя)
build:frontend:
  stage: build
  image: node:${NODE_VERSION}-alpine
  script:
    - cd frontend
    - npm ci
    - npm run build
  artifacts:
    when: on_success
    paths:
      - frontend/.next/

# Опционально: сборка через Docker (раскомментируйте при необходимости)
# build:docker:
#   stage: build
#   image: docker:24
#   services:
#     - docker:24-dind
#   variables:
#     DOCKER_TLS_CERTDIR: "/certs"
#   script:
#     - docker compose -f docker-compose.yml build frontend
