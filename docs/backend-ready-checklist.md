# –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±—ç–∫–µ–Ω–¥–∞ –∫ —Ä–∞–±–æ—Ç–µ

## ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 100%

–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –¢–ó —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç.

### Focus —Å–µ—Ä–≤–∏—Å
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω (email/password)
- ‚úÖ –í—Ö–æ–¥ –ø–æ Telegram (initData –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∏ –≤—ã–¥–∞—á–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Focus Kids
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –†–æ–ª–∏ (Admin, Moderator, User)

### Focus Kids —Å–µ—Ä–≤–∏—Å
- ‚úÖ –£—á–µ–Ω–∏–∫–∏, —É—á–∏—Ç–µ–ª—è, –≥—Ä—É–ø–ø—ã
- ‚úÖ –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å, –æ—Ü–µ–Ω–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è, –ª–µ–∫—Ü–∏–∏, –î–ó, —Ç–µ—Å—Ç—ã
- ‚úÖ RuTube embed –¥–ª—è –ª–µ–∫—Ü–∏–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫ –î–ó (—á–µ—Ä–µ–∑ URL)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –†–æ–ª–∏ Teacher/Student —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –¥–æ—Å—Ç—É–ø–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ focus_user_id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Student/Teacher

## ‚ö†Ô∏è –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 1. CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** CORS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
**–ß—Ç–æ –Ω—É–∂–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å CORS middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

**Focus (NestJS):**
```typescript
// main.ts
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  app.enableCors({
    origin: process.env.FRONTEND_URL || 'http://localhost:3000',
    credentials: true,
  });
  // ...
}
```

**Focus Kids (FastAPI):**
```python
# main.py
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
  CORSMiddleware,
  allow_origins=[settings.FRONTEND_URL] if hasattr(settings, 'FRONTEND_URL') else ["*"],
  allow_credentials=True,
  allow_methods=["*"],
  allow_headers=["*"],
)
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –§–∞–π–ª—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ URL (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ –æ–±–ª–∞–∫–æ)  
**–ß—Ç–æ –Ω—É–∂–Ω–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –±—ç–∫–µ–Ω–¥:
- –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (multer –¥–ª—è NestJS, FastAPI UploadFile)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ª–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ –∏–ª–∏ S3)

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (console.log)  
**–ß—Ç–æ –Ω—É–∂–Ω–æ:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Winston –¥–ª—è NestJS, structlog –¥–ª—è FastAPI)

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ë–∞–∑–æ–≤—ã–µ HTTPException  
**–ß—Ç–æ –Ω—É–∂–Ω–æ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ exception filters –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

### 5. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** `synchronize: true` (dev) –∏ `create_all()` (dev)  
**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- TypeORM –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è Focus
- Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è Focus Kids

### 6. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚úÖ –ï—Å—Ç—å (class-validator, Pydantic)  
**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** Rate limiting, input sanitization

## üöÄ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ?

**–î–∞, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≥–æ—Ç–æ–≤!** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç.

**–î–ª—è –∑–∞–ø—É—Å–∫–∞:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Ñ–∞–π–ª—ã (JWT —Å–µ–∫—Ä–µ—Ç—ã, –ë–î, Telegram bot token)
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `docker-compose up` –∏–ª–∏ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –ª–æ–∫–∞–ª—å–Ω–æ
3. –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ API

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –¥–æ–±–∞–≤–∏—Ç—å:**
- CORS (–µ—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–≤–º–µ—Å—Ç–æ synchronize/create_all)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
