# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–∞

## ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Focus —Å–µ—Ä–≤–∏—Å (NestJS)

- ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (`POST /api/auth/register`)
- ‚úÖ **–õ–æ–≥–∏–Ω** (`POST /api/auth/login`) —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ **–í—Ö–æ–¥ –ø–æ Telegram** (`POST /api/auth/telegram`) ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è initData –Ω–∞ –±—ç–∫–µ–Ω–¥–µ, –≤–æ–∑–≤—Ä–∞—Ç JWT
- ‚úÖ **–ü—Ä–∏–≤—è–∑–∫–∞ Telegram –∫ –∞–∫–∫–∞—É–Ω—Ç—É** (`PATCH /api/auth/me/link-telegram`) ‚Äî –ø–æ JWT + initData
- ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ** (`GET /api/auth/me`)
- ‚úÖ **–ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (`PATCH /api/moderation/users/:id/approve`)
- ‚úÖ **–í—ã–¥–∞—á–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Focus Kids** (`PATCH /api/moderation/users/:id/kids-access`)
- ‚úÖ **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —Å guards –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏
- ‚úÖ **–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** (Admin, Moderator, User)
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Focus Kids** (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ API)
- ‚úÖ **–ü–æ–ª–µ telegram_user_id** –≤ User –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ Telegram

### Focus Kids —Å–µ—Ä–≤–∏—Å (FastAPI)

- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —É—á–µ–Ω–∏–∫–æ–≤** (CRUD; –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ focus_user_id –≤ Focus)
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç–µ–ª–µ–π** (CRUD; –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è focus_user_id –≤ Focus)
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø** (CRUD, –ø—Ä–∏–≤—è–∑–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤ –∫ –≥—Ä—É–ø–ø–∞–º)
- ‚úÖ **–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –æ—Ñ—Ñ–ª–∞–π–Ω –∑–∞–Ω—è—Ç–∏–π**
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–æ–∫**
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤ –∏ —É—á–∏—Ç–µ–ª–µ–π** (—É—á–µ–Ω–∏–∫ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ—é, —É—á–∏—Ç–µ–ª—å ‚Äî —Å–≤–æ—é –ø–æ –≥—Ä—É–ø–ø–∞–º)
- ‚úÖ **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è** (CRUD –ø—Ä–æ–≥—Ä–∞–º–º)
- ‚úÖ **–õ–µ–∫—Ü–∏–∏** (CRUD, RuTube video ID)
- ‚úÖ **RuTube embed** ‚Äî —Å–µ—Ä–≤–∏—Å `rutube_service` –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/lectures/{id}/embed` (embed_url, embed_html)
- ‚úÖ **–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è** (CRUD, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫ –∑–∞–¥–∞–Ω–∏—è–º)
- ‚úÖ **–û—Ç–≤–µ—Ç—ã –Ω–∞ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è** (–∑–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ —Å —Ñ–∞–π–ª–∞–º–∏; —Ç–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫)
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ—Ç–≤–µ—Ç–∞–º**
- ‚úÖ **–û—Ü–µ–Ω–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π —É—á–∏—Ç–µ–ª–µ–º**
- ‚úÖ **–¢–µ—Å—Ç—ã** (CRUD —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤)
- ‚úÖ **–ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤** (—Ç–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤**
- ‚úÖ **–ü–µ—Ä–µ–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤** (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª–µ–º)
- ‚úÖ **–†–æ–ª–∏ Teacher/Student** ‚Äî –¥–æ—Å—Ç—É–ø –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –ø–æ —Ä–æ–ª–∏ (Teacher: —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º, –ª–µ–∫—Ü–∏–π, –î–ó, —Ç–µ—Å—Ç–æ–≤, –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫; Student: –æ—Ç–ø—Ä–∞–≤–∫–∞ –î–ó, –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- ‚úÖ **JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤ Focus Kids (–æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç —Å Focus)
- ‚úÖ **–†–æ–ª—å –≤ Focus Kids** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∑–∞–ø–∏—Å–∏ Teacher/Student —Å focus_user_id = JWT sub
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ focus_user_id** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Student/Teacher —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å –∫ Focus API
- ‚úÖ **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (PostgreSQL)

## üìã –ò—Ç–æ–≥–æ

**–ë—ç–∫–µ–Ω–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É:**

1. ‚úÖ RuTube API ‚Äî —Å–µ—Ä–≤–∏—Å –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç embed –¥–ª—è –ª–µ–∫—Ü–∏–π  
2. ‚úÖ Telegram WebApp initData ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ Focus, –≤—Ö–æ–¥ –∏ –ø—Ä–∏–≤—è–∑–∫–∞ Telegram  
3. ‚úÖ –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –≤ Focus Kids ‚Äî Teacher/Student, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º  
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ focus_user_id –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Student/Teacher  

–î–ª—è —Ä–∞–±–æ—Ç—ã Telegram-–≤—Ö–æ–¥–∞ –≤ Focus –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å `TELEGRAM_BOT_TOKEN` –≤ `.env` Focus —Å–µ—Ä–≤–∏—Å–∞.
